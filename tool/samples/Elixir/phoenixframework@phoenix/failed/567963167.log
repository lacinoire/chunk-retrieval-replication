travis_fold:start:worker_info[0K[33;1mWorker information[0m
hostname: e8039528-342f-4320-94c2-5b9a03feb5b8@1.worker-org-5dcc948c89-sw75q.gce-production-2
version: v6.2.1 https://github.com/travis-ci/worker/tree/4e3246c044eb4915c2378ffacd0b3d3ed0136bba
instance: travis-job-a94b2fd8-2a7a-4b64-bede-69c1dc22afff travis-ci-opal-xenial-1553530491-f909ac5 (via amqp)
startup: 6.58841181s
travis_fold:end:worker_info[0Ktravis_fold:start:system_info[0K[33;1mBuild system information[0m
Build language: elixir
Build group: stable
Build dist: xenial
Build id: 567963167
Job id: 567963168
Runtime kernel version: 4.15.0-1028-gcp
travis-build version: 7964ef0e9
[34m[1mBuild image provisioning date and time[0m
Mon Mar 25 16:52:50 UTC 2019
[34m[1mOperating System Details[0m
Distributor ID:	Ubuntu
Description:	Ubuntu 16.04.6 LTS
Release:	16.04
Codename:	xenial
[34m[1mSystemd Version[0m
systemd 229
[34m[1mCookbooks Version[0m
42e42e4 https://github.com/travis-ci/travis-cookbooks/tree/42e42e4
[34m[1mgit version[0m
git version 2.21.0
[34m[1mbash version[0m
GNU bash, version 4.3.48(1)-release (x86_64-pc-linux-gnu)
[34m[1mgcc version[0m
gcc (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609
[34m[1mdocker version[0m
Client:
 Version:           18.06.0-ce
 API version:       1.38
 Go version:        go1.10.3
 Git commit:        0ffa825
 Built:             Wed Jul 18 19:11:02 2018
 OS/Arch:           linux/amd64
 Experimental:      false

Server:
 Engine:
  Version:          18.06.0-ce
  API version:      1.38 (minimum version 1.12)
  Go version:       go1.10.3
  Git commit:       0ffa825
  Built:            Wed Jul 18 19:09:05 2018
  OS/Arch:          linux/amd64
  Experimental:     false
[34m[1mclang version[0m
clang version 7.0.0 (tags/RELEASE_700/final)
[34m[1mjq version[0m
jq-1.5
[34m[1mbats version[0m
Bats 0.4.0
[34m[1mshellcheck version[0m
0.6.0
[34m[1mshfmt version[0m
v2.6.3
[34m[1mccache version[0m
3.2.4
[34m[1mcmake version[0m
cmake version 3.12.4
[34m[1mheroku version[0m
heroku/7.22.7 linux-x64 node-v11.10.1
[34m[1mimagemagick version[0m
Version: ImageMagick 6.8.9-9 Q16 x86_64 2018-09-28 http://www.imagemagick.org
[34m[1mmd5deep version[0m
4.4
[34m[1mmercurial version[0m
version 4.8
[34m[1mmysql version[0m
mysql  Ver 14.14 Distrib 5.7.25, for Linux (x86_64) using  EditLine wrapper
[34m[1mopenssl version[0m
OpenSSL 1.0.2g  1 Mar 2016
[34m[1mpacker version[0m
1.3.3
[34m[1mpostgresql client version[0m
psql (PostgreSQL) 10.7 (Ubuntu 10.7-1.pgdg16.04+1)
[34m[1mragel version[0m
Ragel State Machine Compiler version 6.8 Feb 2013
[34m[1msudo version[0m
1.8.16
[34m[1mgzip version[0m
gzip 1.6
[34m[1mzip version[0m
Zip 3.0
[34m[1mvim version[0m
VIM - Vi IMproved 7.4 (2013 Aug 10, compiled Nov 24 2016 16:44:48)
[34m[1miptables version[0m
iptables v1.6.0
[34m[1mcurl version[0m
curl 7.47.0 (x86_64-pc-linux-gnu) libcurl/7.47.0 GnuTLS/3.4.10 zlib/1.2.8 libidn/1.32 librtmp/2.3
[34m[1mwget version[0m
GNU Wget 1.17.1 built on linux-gnu.
[34m[1mrsync version[0m
rsync  version 3.1.1  protocol version 31
[34m[1mgimme version[0m
v1.5.3
[34m[1mnvm version[0m
0.34.0
[34m[1mperlbrew version[0m
/home/travis/perl5/perlbrew/bin/perlbrew  - App::perlbrew/0.82
[34m[1mphpenv version[0m
rbenv 1.1.2
[34m[1mrvm version[0m
rvm 1.29.7 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]
[34m[1mdefault ruby version[0m
ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]
[34m[1mCouchDB version[0m
couchdb 1.6.1
[34m[1mElasticSearch version[0m
5.5.0
[34m[1mInstalled Firefox version[0m
firefox 63.0.1
[34m[1mMongoDB version[0m
MongoDB 4.0.7
[34m[1mPhantomJS version[0m
2.1.1
[34m[1mPre-installed PostgreSQL versions[0m
9.4.21
9.5.16
9.6.12
[34m[1mRedis version[0m
redis-server 5.0.4
[34m[1mkerl list installations[0m
21.1
[34m[1melixirs[0m
=* elixir-1.7.4
[34m[1mrebar --version[0m
rebar 2.6.4 17 20160831_145136 git 2.6.4-dirty
[34m[1mperlbrew list[0m
   5.26                  (5.26.3)            (installed on Mon Mar 25 16:41:45 2019)
   5.26.3                                    (installed on Mon Mar 25 16:41:45 2019)
   5.26-extras           (5.26.2)            (installed on Mon Mar 25 16:45:42 2019)
   5.26-shrplib          (5.26.2)            (installed on Mon Mar 25 16:45:42 2019)
   5.26.2                                    (installed on Mon Mar 25 16:41:51 2019)
   5.24                  (5.24.3)            (installed on Mon Mar 25 16:46:12 2019)
   5.24.3                                    (installed on Mon Mar 25 16:46:12 2019)
   5.24-extras           (5.24.0)            (installed on Mon Mar 25 16:50:00 2019)
   5.24-shrplib          (5.24.0)            (installed on Mon Mar 25 16:50:00 2019)
travis_fold:end:system_info[0K
travis_fold:start:docker_mtu[0Ktravis_fold:end:docker_mtu[0Ktravis_fold:start:resolvconf[0Ktravis_fold:end:resolvconf[0K
travis_fold:start:git.checkout[0Ktravis_time:start:00063f68[0K$ git clone --depth=50 https://github.com/phoenixframework/phoenix.git phoenixframework/phoenix
Cloning into 'phoenixframework/phoenix'...
remote: Enumerating objects: 813, done.[K
remote: Counting objects:   0% (1/813)   [Kremote: Counting objects:   1% (9/813)   [Kremote: Counting objects:   2% (17/813)   [Kremote: Counting objects:   3% (25/813)   [Kremote: Counting objects:   4% (33/813)   [Kremote: Counting objects:   5% (41/813)   [Kremote: Counting objects:   6% (49/813)   [Kremote: Counting objects:   7% (57/813)   [Kremote: Counting objects:   8% (66/813)   [Kremote: Counting objects:   9% (74/813)   [Kremote: Counting objects:  10% (82/813)   [Kremote: Counting objects:  11% (90/813)   [Kremote: Counting objects:  12% (98/813)   [Kremote: Counting objects:  13% (106/813)   [Kremote: Counting objects:  14% (114/813)   [Kremote: Counting objects:  15% (122/813)   [Kremote: Counting objects:  16% (131/813)   [Kremote: Counting objects:  17% (139/813)   [Kremote: Counting objects:  18% (147/813)   [Kremote: Counting objects:  19% (155/813)   [Kremote: Counting objects:  20% (163/813)   [Kremote: Counting objects:  21% (171/813)   [Kremote: Counting objects:  22% (179/813)   [Kremote: Counting objects:  23% (187/813)   [Kremote: Counting objects:  24% (196/813)   [Kremote: Counting objects:  25% (204/813)   [Kremote: Counting objects:  26% (212/813)   [Kremote: Counting objects:  27% (220/813)   [Kremote: Counting objects:  28% (228/813)   [Kremote: Counting objects:  29% (236/813)   [Kremote: Counting objects:  30% (244/813)   [Kremote: Counting objects:  31% (253/813)   [Kremote: Counting objects:  32% (261/813)   [Kremote: Counting objects:  33% (269/813)   [Kremote: Counting objects:  34% (277/813)   [Kremote: Counting objects:  35% (285/813)   [Kremote: Counting objects:  36% (293/813)   [Kremote: Counting objects:  37% (301/813)   [Kremote: Counting objects:  38% (309/813)   [Kremote: Counting objects:  39% (318/813)   [Kremote: Counting objects:  40% (326/813)   [Kremote: Counting objects:  41% (334/813)   [Kremote: Counting objects:  42% (342/813)   [Kremote: Counting objects:  43% (350/813)   [Kremote: Counting objects:  44% (358/813)   [Kremote: Counting objects:  45% (366/813)   [Kremote: Counting objects:  46% (374/813)   [Kremote: Counting objects:  47% (383/813)   [Kremote: Counting objects:  48% (391/813)   [Kremote: Counting objects:  49% (399/813)   [Kremote: Counting objects:  50% (407/813)   [Kremote: Counting objects:  51% (415/813)   [Kremote: Counting objects:  52% (423/813)   [Kremote: Counting objects:  53% (431/813)   [Kremote: Counting objects:  54% (440/813)   [Kremote: Counting objects:  55% (448/813)   [Kremote: Counting objects:  56% (456/813)   [Kremote: Counting objects:  57% (464/813)   [Kremote: Counting objects:  58% (472/813)   [Kremote: Counting objects:  59% (480/813)   [Kremote: Counting objects:  60% (488/813)   [Kremote: Counting objects:  61% (496/813)   [Kremote: Counting objects:  62% (505/813)   [Kremote: Counting objects:  63% (513/813)   [Kremote: Counting objects:  64% (521/813)   [Kremote: Counting objects:  65% (529/813)   [Kremote: Counting objects:  66% (537/813)   [Kremote: Counting objects:  67% (545/813)   [Kremote: Counting objects:  68% (553/813)   [Kremote: Counting objects:  69% (561/813)   [Kremote: Counting objects:  70% (570/813)   [Kremote: Counting objects:  71% (578/813)   [Kremote: Counting objects:  72% (586/813)   [Kremote: Counting objects:  73% (594/813)   [Kremote: Counting objects:  74% (602/813)   [Kremote: Counting objects:  75% (610/813)   [Kremote: Counting objects:  76% (618/813)   [Kremote: Counting objects:  77% (627/813)   [Kremote: Counting objects:  78% (635/813)   [Kremote: Counting objects:  79% (643/813)   [Kremote: Counting objects:  80% (651/813)   [Kremote: Counting objects:  81% (659/813)   [Kremote: Counting objects:  82% (667/813)   [Kremote: Counting objects:  83% (675/813)   [Kremote: Counting objects:  84% (683/813)   [Kremote: Counting objects:  85% (692/813)   [Kremote: Counting objects:  86% (700/813)   [Kremote: Counting objects:  87% (708/813)   [Kremote: Counting objects:  88% (716/813)   [Kremote: Counting objects:  89% (724/813)   [Kremote: Counting objects:  90% (732/813)   [Kremote: Counting objects:  91% (740/813)   [Kremote: Counting objects:  92% (748/813)   [Kremote: Counting objects:  93% (757/813)   [Kremote: Counting objects:  94% (765/813)   [Kremote: Counting objects:  95% (773/813)   [Kremote: Counting objects:  96% (781/813)   [Kremote: Counting objects:  97% (789/813)   [Kremote: Counting objects:  98% (797/813)   [Kremote: Counting objects:  99% (805/813)   [Kremote: Counting objects: 100% (813/813)   [Kremote: Counting objects: 100% (813/813), done.[K
remote: Compressing objects:   0% (1/504)   [Kremote: Compressing objects:   1% (6/504)   [Kremote: Compressing objects:   2% (11/504)   [Kremote: Compressing objects:   3% (16/504)   [Kremote: Compressing objects:   4% (21/504)   [Kremote: Compressing objects:   5% (26/504)   [Kremote: Compressing objects:   6% (31/504)   [Kremote: Compressing objects:   7% (36/504)   [Kremote: Compressing objects:   8% (41/504)   [Kremote: Compressing objects:   9% (46/504)   [Kremote: Compressing objects:  10% (51/504)   [Kremote: Compressing objects:  11% (56/504)   [Kremote: Compressing objects:  12% (61/504)   [Kremote: Compressing objects:  13% (66/504)   [Kremote: Compressing objects:  14% (71/504)   [Kremote: Compressing objects:  15% (76/504)   [Kremote: Compressing objects:  16% (81/504)   [Kremote: Compressing objects:  17% (86/504)   [Kremote: Compressing objects:  18% (91/504)   [Kremote: Compressing objects:  19% (96/504)   [Kremote: Compressing objects:  20% (101/504)   [Kremote: Compressing objects:  21% (106/504)   [Kremote: Compressing objects:  22% (111/504)   [Kremote: Compressing objects:  23% (116/504)   [Kremote: Compressing objects:  24% (121/504)   [Kremote: Compressing objects:  25% (126/504)   [Kremote: Compressing objects:  26% (132/504)   [Kremote: Compressing objects:  27% (137/504)   [Kremote: Compressing objects:  28% (142/504)   [Kremote: Compressing objects:  29% (147/504)   [Kremote: Compressing objects:  30% (152/504)   [Kremote: Compressing objects:  31% (157/504)   [Kremote: Compressing objects:  32% (162/504)   [Kremote: Compressing objects:  33% (167/504)   [Kremote: Compressing objects:  34% (172/504)   [Kremote: Compressing objects:  35% (177/504)   [Kremote: Compressing objects:  36% (182/504)   [Kremote: Compressing objects:  37% (187/504)   [Kremote: Compressing objects:  38% (192/504)   [Kremote: Compressing objects:  39% (197/504)   [Kremote: Compressing objects:  40% (202/504)   [Kremote: Compressing objects:  41% (207/504)   [Kremote: Compressing objects:  42% (212/504)   [Kremote: Compressing objects:  43% (217/504)   [Kremote: Compressing objects:  44% (222/504)   [Kremote: Compressing objects:  45% (227/504)   [Kremote: Compressing objects:  46% (232/504)   [Kremote: Compressing objects:  47% (237/504)   [Kremote: Compressing objects:  48% (242/504)   [Kremote: Compressing objects:  49% (247/504)   [Kremote: Compressing objects:  50% (252/504)   [Kremote: Compressing objects:  51% (258/504)   [Kremote: Compressing objects:  52% (263/504)   [Kremote: Compressing objects:  53% (268/504)   [Kremote: Compressing objects:  54% (273/504)   [Kremote: Compressing objects:  55% (278/504)   [Kremote: Compressing objects:  56% (283/504)   [Kremote: Compressing objects:  57% (288/504)   [Kremote: Compressing objects:  58% (293/504)   [Kremote: Compressing objects:  59% (298/504)   [Kremote: Compressing objects:  60% (303/504)   [Kremote: Compressing objects:  61% (308/504)   [Kremote: Compressing objects:  62% (313/504)   [Kremote: Compressing objects:  63% (318/504)   [Kremote: Compressing objects:  64% (323/504)   [Kremote: Compressing objects:  65% (328/504)   [Kremote: Compressing objects:  66% (333/504)   [Kremote: Compressing objects:  67% (338/504)   [Kremote: Compressing objects:  68% (343/504)   [Kremote: Compressing objects:  69% (348/504)   [Kremote: Compressing objects:  70% (353/504)   [Kremote: Compressing objects:  71% (358/504)   [Kremote: Compressing objects:  72% (363/504)   [Kremote: Compressing objects:  73% (368/504)   [Kremote: Compressing objects:  74% (373/504)   [Kremote: Compressing objects:  75% (378/504)   [Kremote: Compressing objects:  76% (384/504)   [Kremote: Compressing objects:  77% (389/504)   [Kremote: Compressing objects:  78% (394/504)   [Kremote: Compressing objects:  79% (399/504)   [Kremote: Compressing objects:  80% (404/504)   [Kremote: Compressing objects:  81% (409/504)   [Kremote: Compressing objects:  82% (414/504)   [Kremote: Compressing objects:  83% (419/504)   [Kremote: Compressing objects:  84% (424/504)   [Kremote: Compressing objects:  85% (429/504)   [Kremote: Compressing objects:  86% (434/504)   [Kremote: Compressing objects:  87% (439/504)   [Kremote: Compressing objects:  88% (444/504)   [Kremote: Compressing objects:  89% (449/504)   [Kremote: Compressing objects:  90% (454/504)   [Kremote: Compressing objects:  91% (459/504)   [Kremote: Compressing objects:  92% (464/504)   [Kremote: Compressing objects:  93% (469/504)   [Kremote: Compressing objects:  94% (474/504)   [Kremote: Compressing objects:  95% (479/504)   [Kremote: Compressing objects:  96% (484/504)   [Kremote: Compressing objects:  97% (489/504)   [Kremote: Compressing objects:  98% (494/504)   [Kremote: Compressing objects:  99% (499/504)   [Kremote: Compressing objects: 100% (504/504)   [Kremote: Compressing objects: 100% (504/504), done.[K
Receiving objects:   0% (1/813)   Receiving objects:   1% (9/813)   Receiving objects:   2% (17/813)   Receiving objects:   3% (25/813)   Receiving objects:   4% (33/813)   Receiving objects:   5% (41/813)   Receiving objects:   6% (49/813)   Receiving objects:   7% (57/813)   Receiving objects:   8% (66/813)   Receiving objects:   9% (74/813)   Receiving objects:  10% (82/813)   Receiving objects:  11% (90/813)   Receiving objects:  12% (98/813)   Receiving objects:  13% (106/813)   Receiving objects:  14% (114/813)   Receiving objects:  15% (122/813)   Receiving objects:  16% (131/813)   Receiving objects:  17% (139/813)   Receiving objects:  18% (147/813)   Receiving objects:  19% (155/813)   Receiving objects:  20% (163/813)   Receiving objects:  21% (171/813)   Receiving objects:  22% (179/813)   Receiving objects:  23% (187/813)   Receiving objects:  24% (196/813)   Receiving objects:  25% (204/813)   Receiving objects:  26% (212/813)   Receiving objects:  27% (220/813)   Receiving objects:  28% (228/813)   Receiving objects:  29% (236/813)   Receiving objects:  30% (244/813)   Receiving objects:  31% (253/813)   Receiving objects:  32% (261/813)   Receiving objects:  33% (269/813)   Receiving objects:  34% (277/813)   Receiving objects:  35% (285/813)   Receiving objects:  36% (293/813)   Receiving objects:  37% (301/813)   Receiving objects:  38% (309/813)   Receiving objects:  39% (318/813)   Receiving objects:  40% (326/813)   Receiving objects:  41% (334/813)   Receiving objects:  42% (342/813)   Receiving objects:  43% (350/813)   Receiving objects:  44% (358/813)   Receiving objects:  45% (366/813)   Receiving objects:  46% (374/813)   Receiving objects:  47% (383/813)   Receiving objects:  48% (391/813)   Receiving objects:  49% (399/813)   Receiving objects:  50% (407/813)   Receiving objects:  51% (415/813)   Receiving objects:  52% (423/813)   Receiving objects:  53% (431/813)   Receiving objects:  54% (440/813)   Receiving objects:  55% (448/813)   Receiving objects:  56% (456/813)   Receiving objects:  57% (464/813)   Receiving objects:  58% (472/813)   Receiving objects:  59% (480/813)   Receiving objects:  60% (488/813)   Receiving objects:  61% (496/813)   Receiving objects:  62% (505/813)   Receiving objects:  63% (513/813)   Receiving objects:  64% (521/813)   Receiving objects:  65% (529/813)   Receiving objects:  66% (537/813)   Receiving objects:  67% (545/813)   Receiving objects:  68% (553/813)   Receiving objects:  69% (561/813)   Receiving objects:  70% (570/813)   Receiving objects:  71% (578/813)   Receiving objects:  72% (586/813)   Receiving objects:  73% (594/813)   Receiving objects:  74% (602/813)   Receiving objects:  75% (610/813)   Receiving objects:  76% (618/813)   Receiving objects:  77% (627/813)   Receiving objects:  78% (635/813)   Receiving objects:  79% (643/813)   Receiving objects:  80% (651/813)   Receiving objects:  81% (659/813)   Receiving objects:  82% (667/813)   remote: Total 813 (delta 331), reused 482 (delta 261), pack-reused 0[K
Receiving objects:  83% (675/813)   Receiving objects:  84% (683/813)   Receiving objects:  85% (692/813)   Receiving objects:  86% (700/813)   Receiving objects:  87% (708/813)   Receiving objects:  88% (716/813)   Receiving objects:  89% (724/813)   Receiving objects:  90% (732/813)   Receiving objects:  91% (740/813)   Receiving objects:  92% (748/813)   Receiving objects:  93% (757/813)   Receiving objects:  94% (765/813)   Receiving objects:  95% (773/813)   Receiving objects:  96% (781/813)   Receiving objects:  97% (789/813)   Receiving objects:  98% (797/813)   Receiving objects:  99% (805/813)   Receiving objects: 100% (813/813)   Receiving objects: 100% (813/813), 994.25 KiB | 9.75 MiB/s, done.
Resolving deltas:   0% (0/331)   Resolving deltas:   3% (12/331)   Resolving deltas:   4% (15/331)   Resolving deltas:   6% (22/331)   Resolving deltas:  19% (64/331)   Resolving deltas:  22% (74/331)   Resolving deltas:  23% (77/331)   Resolving deltas:  24% (80/331)   Resolving deltas:  25% (86/331)   Resolving deltas:  27% (92/331)   Resolving deltas:  28% (93/331)   Resolving deltas:  29% (96/331)   Resolving deltas:  30% (100/331)   Resolving deltas:  31% (105/331)   Resolving deltas:  32% (108/331)   Resolving deltas:  34% (113/331)   Resolving deltas:  35% (116/331)   Resolving deltas:  37% (124/331)   Resolving deltas:  38% (126/331)   Resolving deltas:  39% (130/331)   Resolving deltas:  41% (138/331)   Resolving deltas:  42% (140/331)   Resolving deltas:  43% (144/331)   Resolving deltas:  45% (151/331)   Resolving deltas:  47% (156/331)   Resolving deltas:  48% (161/331)   Resolving deltas:  49% (163/331)   Resolving deltas:  51% (169/331)   Resolving deltas:  52% (174/331)   Resolving deltas:  53% (176/331)   Resolving deltas:  54% (179/331)   Resolving deltas:  59% (198/331)   Resolving deltas:  60% (199/331)   Resolving deltas:  61% (202/331)   Resolving deltas:  62% (207/331)   Resolving deltas:  63% (210/331)   Resolving deltas:  64% (215/331)   Resolving deltas:  65% (218/331)   Resolving deltas:  67% (222/331)   Resolving deltas:  69% (230/331)   Resolving deltas:  70% (232/331)   Resolving deltas:  71% (236/331)   Resolving deltas:  72% (239/331)   Resolving deltas:  73% (243/331)   Resolving deltas:  74% (245/331)   Resolving deltas:  75% (250/331)   Resolving deltas:  76% (254/331)   Resolving deltas:  77% (256/331)   Resolving deltas:  78% (259/331)   Resolving deltas:  81% (269/331)   Resolving deltas:  82% (272/331)   Resolving deltas:  83% (276/331)   Resolving deltas:  84% (279/331)   Resolving deltas:  85% (282/331)   Resolving deltas:  86% (285/331)   Resolving deltas:  87% (288/331)   Resolving deltas:  88% (292/331)   Resolving deltas:  89% (296/331)   Resolving deltas:  92% (305/331)   Resolving deltas:  94% (313/331)   Resolving deltas:  95% (316/331)   Resolving deltas:  96% (319/331)   Resolving deltas:  98% (326/331)   Resolving deltas: 100% (331/331)   Resolving deltas: 100% (331/331), done.
travis_time:end:00063f68:start=1565022176741593172,finish=1565022177657499369,duration=915906197[0K$ cd phoenixframework/phoenix
travis_time:start:0b9a0294[0K$ git fetch origin +refs/pull/3510/merge:
remote: Enumerating objects: 30, done.[K
remote: Counting objects:   4% (1/22)   [Kremote: Counting objects:   9% (2/22)   [Kremote: Counting objects:  13% (3/22)   [Kremote: Counting objects:  18% (4/22)   [Kremote: Counting objects:  22% (5/22)   [Kremote: Counting objects:  27% (6/22)   [Kremote: Counting objects:  31% (7/22)   [Kremote: Counting objects:  36% (8/22)   [Kremote: Counting objects:  40% (9/22)   [Kremote: Counting objects:  45% (10/22)   [Kremote: Counting objects:  50% (11/22)   [Kremote: Counting objects:  54% (12/22)   [Kremote: Counting objects:  59% (13/22)   [Kremote: Counting objects:  63% (14/22)   [Kremote: Counting objects:  68% (15/22)   [Kremote: Counting objects:  72% (16/22)   [Kremote: Counting objects:  77% (17/22)   [Kremote: Counting objects:  81% (18/22)   [Kremote: Counting objects:  86% (19/22)   [Kremote: Counting objects:  90% (20/22)   [Kremote: Counting objects:  95% (21/22)   [Kremote: Counting objects: 100% (22/22)   [Kremote: Counting objects: 100% (22/22), done.[K
remote: Compressing objects:  20% (1/5)   [Kremote: Compressing objects:  40% (2/5)   [Kremote: Compressing objects:  60% (3/5)   [Kremote: Compressing objects:  80% (4/5)   [Kremote: Compressing objects: 100% (5/5)   [Kremote: Compressing objects: 100% (5/5), done.[K
remote: Total 12 (delta 7), reused 10 (delta 6), pack-reused 0[K
Unpacking objects:   8% (1/12)   Unpacking objects:  16% (2/12)   Unpacking objects:  25% (3/12)   Unpacking objects:  33% (4/12)   Unpacking objects:  41% (5/12)   Unpacking objects:  50% (6/12)   Unpacking objects:  58% (7/12)   Unpacking objects:  66% (8/12)   Unpacking objects:  75% (9/12)   Unpacking objects:  83% (10/12)   Unpacking objects:  91% (11/12)   Unpacking objects: 100% (12/12)   Unpacking objects: 100% (12/12), done.
From https://github.com/phoenixframework/phoenix
 * branch            refs/pull/3510/merge -> FETCH_HEAD
travis_time:end:0b9a0294:start=1565022177666670607,finish=1565022178261145560,duration=594474953[0K$ git checkout -qf FETCH_HEAD
travis_fold:end:git.checkout[0K

[33;1mSetting environment variables from .travis.yml[0m
$ export ELIXIR_ASSERT_TIMEOUT=2000
$ export COWBOY_VERSION=1.0

[33;1m19.3 is not installed. Downloading and installing pre-build binary.[0m
[33;1mDownloading archive: https://storage.googleapis.com/travis-ci-language-archives/erlang/binaries/ubuntu/16.04/x86_64/erlang-19.3-nonroot.tar.bz2[0m
travis_time:start:0ca69b7e[0K$ wget -o ${TRAVIS_HOME}/erlang.tar.bz2 ${archive_url}
travis_time:end:0ca69b7e:start=1565022178412134516,finish=1565022178829177985,duration=417043469[0Ktravis_time:start:01117440[0K$ mkdir -p ~/otp && tar -xf erlang-19.3-nonroot.tar.bz2 -C ~/otp/
travis_time:end:01117440:start=1565022178838272039,finish=1565022185982463463,duration=7144191424[0Ktravis_time:start:116b6d16[0K$ mkdir -p ~/.kerl
travis_time:end:116b6d16:start=1565022185991892995,finish=1565022185996168445,duration=4275450[0Ktravis_time:start:0f1ca2b4[0K$ echo '19.3,19.3' >> ~/.kerl/otp_builds
travis_time:end:0f1ca2b4:start=1565022186005194058,finish=1565022186012299937,duration=7105879[0Ktravis_time:start:0aaac8fa[0K$ echo '19.3 ${TRAVIS_HOME}/otp/19.3' >> ~/.kerl/otp_builds
travis_time:end:0aaac8fa:start=1565022186021541839,finish=1565022186024288230,duration=2746391[0Ktravis_time:start:0fec5cd4[0K$ source ${TRAVIS_HOME}/otp/19.3/activate
travis_time:end:0fec5cd4:start=1565022186034473450,finish=1565022186041348395,duration=6874945[0Ktravis_fold:start:cache.1[0KSetting up build cache
$ export CASHER_DIR=${TRAVIS_HOME}/.casher
travis_time:start:0fac6a0c[0K$ Installing caching utilities
travis_time:end:0fac6a0c:start=1565022186990993634,finish=1565022187290406258,duration=299412624[0Ktravis_time:start:12405d6e[0Ktravis_time:end:12405d6e:start=1565022187300927050,finish=1565022187304061935,duration=3134885[0Ktravis_time:start:00e0d5cd[0Kattempting to download cache archive[0m
[32;1mfetching PR.3510/cache-linux-xenial-12e80c936f50a05df7003bc4c6c1947b55a55335378e7600f2ff88698c663c69--otp-19.3--elixir-1.6.tgz[0m
[32;1mfetching PR.3510/cache--otp-19.3--elixir-1.6.tgz[0m
[32;1mfetching master/cache-linux-xenial-12e80c936f50a05df7003bc4c6c1947b55a55335378e7600f2ff88698c663c69--otp-19.3--elixir-1.6.tgz[0m
[32;1mfound cache[0m
travis_time:end:00e0d5cd:start=1565022187313088177,finish=1565022189284918080,duration=1971829903[0Ktravis_time:start:2d8142ec[0Ktravis_time:end:2d8142ec:start=1565022189294534308,finish=1565022189297704158,duration=3169850[0Ktravis_time:start:0558371a[0Kadding /home/travis/build/phoenixframework/phoenix/assets/node_modules to cache[0m
creating directory /home/travis/build/phoenixframework/phoenix/assets/node_modules[0m
travis_time:end:0558371a:start=1565022189306953885,finish=1565022191596721333,duration=2289767448[0Ktravis_fold:end:cache.1[0K
travis_fold:start:elixir[0KInstalling Elixir 1.6
travis_time:start:0687be38[0K$ wget https://repo.hex.pm/builds/elixir/v1.6-otp-19.zip
--2019-08-05 16:23:11--  https://repo.hex.pm/builds/elixir/v1.6-otp-19.zip
Resolving repo.hex.pm (repo.hex.pm)... 151.101.2.2, 151.101.66.2, 151.101.130.2, ...
Connecting to repo.hex.pm (repo.hex.pm)|151.101.2.2|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 5193598 (5.0M) [application/zip]
Saving to: ‘v1.6-otp-19.zip’

v1.6-otp-19.zip       0%[                    ]       0  --.-KB/s               v1.6-otp-19.zip     100%[===================>]   4.95M  --.-KB/s    in 0.09s   

2019-08-05 16:23:11 (57.2 MB/s) - ‘v1.6-otp-19.zip’ saved [5193598/5193598]

travis_time:end:0687be38:start=1565022191621772214,finish=1565022191783122838,duration=161350624[0K$ echo 'export ELIXIR_VERSION=1.6
    export PATH=${TRAVIS_HOME}/.kiex/elixirs/elixir-1.6/bin:$PATH
    export MIX_ARCHIVES=${TRAVIS_HOME}/.kiex/mix/elixir-1.6' > ${TRAVIS_HOME}/.kiex/elixirs/elixir-1.6.env
$ kiex use 1.6
Using 1.6
travis_fold:end:elixir[0K$ elixir --version
Erlang/OTP 19 [erts-8.3] [source] [64-bit] [smp:2:2] [async-threads:10] [hipe] [kernel-poll:false]

Elixir 1.6.6 (compiled with OTP 19)
travis_fold:start:install.rebar[0Ktravis_time:start:0059a600[0K$ mix local.rebar --force
[32m* creating [0m/home/travis/.mix/rebar[0m
[32m* creating [0m/home/travis/.mix/rebar3[0m
travis_time:end:0059a600:start=1565022192173028428,finish=1565022193318902936,duration=1145874508[0Ktravis_fold:end:install.rebar[0Ktravis_fold:start:install.hex[0Ktravis_time:start:159b743b[0K$ mix local.hex --force
[32m* creating [0m/home/travis/.kiex/mix/elixir-1.6/hex-0.20.1[0m
travis_time:end:159b743b:start=1565022193329327889,finish=1565022194186687889,duration=857360000[0Ktravis_fold:end:install.hex[0Ktravis_fold:start:install.deps[0Ktravis_time:start:1d3c9edf[0K$ mix deps.get
* Getting phoenix_pubsub (https://github.com/phoenixframework/phoenix_pubsub.git)
remote: Enumerating objects: 67, done.        
remote: Counting objects:   1% (1/67)           remote: Counting objects:   2% (2/67)           remote: Counting objects:   4% (3/67)           remote: Counting objects:   5% (4/67)           remote: Counting objects:   7% (5/67)           remote: Counting objects:   8% (6/67)           remote: Counting objects:  10% (7/67)           remote: Counting objects:  11% (8/67)           remote: Counting objects:  13% (9/67)           remote: Counting objects:  14% (10/67)           remote: Counting objects:  16% (11/67)           remote: Counting objects:  17% (12/67)           remote: Counting objects:  19% (13/67)           remote: Counting objects:  20% (14/67)           remote: Counting objects:  22% (15/67)           remote: Counting objects:  23% (16/67)           remote: Counting objects:  25% (17/67)           remote: Counting objects:  26% (18/67)           remote: Counting objects:  28% (19/67)           remote: Counting objects:  29% (20/67)           remote: Counting objects:  31% (21/67)           remote: Counting objects:  32% (22/67)           remote: Counting objects:  34% (23/67)           remote: Counting objects:  35% (24/67)           remote: Counting objects:  37% (25/67)           remote: Counting objects:  38% (26/67)           remote: Counting objects:  40% (27/67)           remote: Counting objects:  41% (28/67)           remote: Counting objects:  43% (29/67)           remote: Counting objects:  44% (30/67)           remote: Counting objects:  46% (31/67)           remote: Counting objects:  47% (32/67)           remote: Counting objects:  49% (33/67)           remote: Counting objects:  50% (34/67)           remote: Counting objects:  52% (35/67)           remote: Counting objects:  53% (36/67)           remote: Counting objects:  55% (37/67)           remote: Counting objects:  56% (38/67)           remote: Counting objects:  58% (39/67)           remote: Counting objects:  59% (40/67)           remote: Counting objects:  61% (41/67)           remote: Counting objects:  62% (42/67)           remote: Counting objects:  64% (43/67)           remote: Counting objects:  65% (44/67)           remote: Counting objects:  67% (45/67)           remote: Counting objects:  68% (46/67)           remote: Counting objects:  70% (47/67)           remote: Counting objects:  71% (48/67)           remote: Counting objects:  73% (49/67)           remote: Counting objects:  74% (50/67)           remote: Counting objects:  76% (51/67)           remote: Counting objects:  77% (52/67)           remote: Counting objects:  79% (53/67)           remote: Counting objects:  80% (54/67)           remote: Counting objects:  82% (55/67)           remote: Counting objects:  83% (56/67)           remote: Counting objects:  85% (57/67)           remote: Counting objects:  86% (58/67)           remote: Counting objects:  88% (59/67)           remote: Counting objects:  89% (60/67)           remote: Counting objects:  91% (61/67)           remote: Counting objects:  92% (62/67)           remote: Counting objects:  94% (63/67)           remote: Counting objects:  95% (64/67)           remote: Counting objects:  97% (65/67)           remote: Counting objects:  98% (66/67)           remote: Counting objects: 100% (67/67)           remote: Counting objects: 100% (67/67), done.        
remote: Compressing objects:   2% (1/49)           remote: Compressing objects:   4% (2/49)           remote: Compressing objects:   6% (3/49)           remote: Compressing objects:   8% (4/49)           remote: Compressing objects:  10% (5/49)           remote: Compressing objects:  12% (6/49)           remote: Compressing objects:  14% (7/49)           remote: Compressing objects:  16% (8/49)           remote: Compressing objects:  18% (9/49)           remote: Compressing objects:  20% (10/49)           remote: Compressing objects:  22% (11/49)           remote: Compressing objects:  24% (12/49)           remote: Compressing objects:  26% (13/49)           remote: Compressing objects:  28% (14/49)           remote: Compressing objects:  30% (15/49)           remote: Compressing objects:  32% (16/49)           remote: Compressing objects:  34% (17/49)           remote: Compressing objects:  36% (18/49)           remote: Compressing objects:  38% (19/49)           remote: Compressing objects:  40% (20/49)           remote: Compressing objects:  42% (21/49)           remote: Compressing objects:  44% (22/49)           remote: Compressing objects:  46% (23/49)           remote: Compressing objects:  48% (24/49)           remote: Compressing objects:  51% (25/49)           remote: Compressing objects:  53% (26/49)           remote: Compressing objects:  55% (27/49)           remote: Compressing objects:  57% (28/49)           remote: Compressing objects:  59% (29/49)           remote: Compressing objects:  61% (30/49)           remote: Compressing objects:  63% (31/49)           remote: Compressing objects:  65% (32/49)           remote: Compressing objects:  67% (33/49)           remote: Compressing objects:  69% (34/49)           remote: Compressing objects:  71% (35/49)           remote: Compressing objects:  73% (36/49)           remote: Compressing objects:  75% (37/49)           remote: Compressing objects:  77% (38/49)           remote: Compressing objects:  79% (39/49)           remote: Compressing objects:  81% (40/49)           remote: Compressing objects:  83% (41/49)           remote: Compressing objects:  85% (42/49)           remote: Compressing objects:  87% (43/49)           remote: Compressing objects:  89% (44/49)           remote: Compressing objects:  91% (45/49)           remote: Compressing objects:  93% (46/49)           remote: Compressing objects:  95% (47/49)           remote: Compressing objects:  97% (48/49)           remote: Compressing objects: 100% (49/49)           remote: Compressing objects: 100% (49/49), done.        
remote: Total 1616 (delta 14), reused 54 (delta 10), pack-reused 1549        
* Getting websocket_client (https://github.com/jeremyong/websocket_client.git)
remote: Enumerating objects: 2, done.        
remote: Counting objects:  50% (1/2)           remote: Counting objects: 100% (2/2)           remote: Counting objects: 100% (2/2), done.        
remote: Compressing objects:  50% (1/2)           remote: Compressing objects: 100% (2/2)           remote: Compressing objects: 100% (2/2), done.        
remote: Total 375 (delta 0), reused 2 (delta 0), pack-reused 373        
Resolving Hex dependencies...
Dependency resolution completed:
Unchanged:
  cowboy 1.1.2
  cowlib 1.0.2
  gettext 0.15.0
  inch_ex 0.5.6
  jason 1.0.0
  plug_cowboy 1.0.0
  plug_crypto 1.0.0
  poison 3.1.0
  ranch 1.3.2
Upgraded:
[32m  earmark 1.2.6 => 1.3.5[31m[0m
[32m  ex_doc 0.19.1 => 0.21.1[31m (minor)[0m
[32m  makeup 0.5.5 => 1.0.0[31m (major)[0m
[32m  makeup_elixir 0.10.0 => 0.14.0[31m (minor)[0m
[32m  mime 1.3.0 => 1.3.1[31m[0m
[32m  nimble_parsec 0.4.0 => 0.5.1[31m (minor)[0m
[32m  phoenix_html 2.11.0 => 2.13.3[31m[0m
[32m  plug 1.7.0 => 1.8.3[31m[0m
New:
[32m  telemetry 0.4.0[31m[0m
* Getting plug (Hex package)
* Getting telemetry (Hex package)
* Getting plug_cowboy (Hex package)
* Getting jason (Hex package)
* Getting phoenix_html (Hex package)
* Getting ex_doc (Hex package)
* Getting inch_ex (Hex package)
* Getting gettext (Hex package)
* Getting poison (Hex package)
* Getting earmark (Hex package)
* Getting makeup_elixir (Hex package)
* Getting makeup (Hex package)
* Getting nimble_parsec (Hex package)
* Getting cowboy (Hex package)
* Getting cowlib (Hex package)
* Getting ranch (Hex package)
* Getting mime (Hex package)
* Getting plug_crypto (Hex package)
travis_time:end:1d3c9edf:start=1565022194197255131,finish=1565022196999397342,duration=2802142211[0Ktravis_fold:end:install.deps[0Ktravis_fold:start:before_script.1[0Ktravis_time:start:00943b9a[0K$ mix deps.get
Resolving Hex dependencies...
Dependency resolution completed:
Unchanged:
  cowboy 1.1.2
  cowlib 1.0.2
  earmark 1.3.5
  ex_doc 0.21.1
  gettext 0.15.0
  inch_ex 0.5.6
  jason 1.0.0
  makeup 1.0.0
  makeup_elixir 0.14.0
  mime 1.3.1
  nimble_parsec 0.5.1
  phoenix_html 2.13.3
  plug 1.8.3
  plug_cowboy 1.0.0
  plug_crypto 1.0.0
  poison 3.1.0
  ranch 1.3.2
  telemetry 0.4.0
All dependencies up to date
travis_time:end:00943b9a:start=1565022197015042265,finish=1565022197970579869,duration=955537604[0Ktravis_fold:end:before_script.1[0Ktravis_fold:start:before_script.2[0Ktravis_time:start:01cf8120[0K$ nvm install 6.2 && nvm use 6.2
Downloading and installing node v6.2.2...
Downloading https://nodejs.org/dist/v6.2.2/node-v6.2.2-linux-x64.tar.xz...
Computing checksum with sha256sum
Checksums matched!
Now using node v6.2.2 (npm v3.9.5)
Now using node v6.2.2 (npm v3.9.5)
travis_time:end:01cf8120:start=1565022197980898430,finish=1565022201685659549,duration=3704761119[0Ktravis_fold:end:before_script.2[0Ktravis_time:start:1a47151c[0K$ mix test
===> Compiling websocket_client
==> gettext
Compiling 1 file (.yrl)
Compiling 1 file (.erl)
Compiling 20 files (.ex)
Generated gettext app
===> Compiling ranch
===> Compiling telemetry
==> jason
Compiling 7 files (.ex)
Generated jason app
==> phoenix_pubsub
Compiling 10 files (.ex)
Generated phoenix_pubsub app
===> Compiling cowlib
src/cow_multipart.erl:392: Warning: crypto:rand_bytes/1 is deprecated and will be removed in a future release; use crypto:strong_rand_bytes/1

===> Compiling cowboy
==> mime
Compiling 2 files (.ex)
Generated mime app
==> plug_crypto
Compiling 4 files (.ex)
Generated plug_crypto app
==> plug
Compiling 1 file (.erl)
Compiling 39 files (.ex)
Generated plug app
==> plug_cowboy
Compiling 5 files (.ex)
Generated plug_cowboy app
==> phoenix_html
Compiling 8 files (.ex)
Generated phoenix_html app
==> phoenix
Compiling 65 files (.ex)
Generated phoenix app
Excluding tags: [:cowboy2]

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[33mwarning: [0munused alias Gen
  test/mix/tasks/phx.gen.cert_test.exs:10

[33mwarning: [0munused import MixHelper
  test/mix/tasks/phx.gen.cert_test.exs:9

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m

  1) test assets are in sync with installer (Mix.Tasks.Phx.NewTest)
     [1m[30mtest/mix/tasks/phx.new_test.exs:96[0m
     [31mAssertion with == failed[0m
     [36mcode:  [0massert File.read!("priv/static/#{file}") == File.read!("installer/templates/phx_static/#{file}")
     [36mleft:  [0m"!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.Phoenix=t():e.Phoenix=t()}(this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){\"use strict\";function i(e){return(i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function [31mo[0m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function [31mr[0m(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function [31ms[0m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function [31ma[0m(e,t,n){return t&&[31ms[0m(e.prototype,t),n&&[31ms[0m(e,n),e}n.r(t),n.d(t,\"Channel\",function(){return [31mk[0m}),n.d(t,\"Serializer\",function(){return [31mb[0m}),n.d(t,\"Socket\",function(){return [31mj[0m}),n.d(t,\"LongPoll\",function(){return C}),n.d(t,\"Ajax\",function(){return [31mR[0m}),n.d(t,\"Presence\",function(){return [31mT[0m});var [31mc[0m=\"undefined\"!=typeof self?self:null,[31mu[0m=\"undefined\"!=typeof window?window:null,[31mh[0m=[31mc[0m||[31mu[0m||void 0,[31ml[0m={connecting:0,open:1,closing:2,closed:3},[31mf[0m=1e4,[31md[0m={closed:\"closed\",errored:\"errored\",joined:\"joined\",joining:\"joining\",leaving:\"leaving\"},[31mp[0m={close:\"phx_close\",error:\"phx_error\",join:\"phx_join\",reply:\"phx_reply\",leave:\"phx_leave\"},[31mv[0m=[[31mp[0m.close,[31mp[0m.error,[31mp[0m.join,[31mp[0m.reply,[31mp[0m.leave],m={longpoll:\"longpoll\",websocket:\"websocket\"},[31my[0m=function(e){if(\"function\"==typeof e)return e;return function(){return e}},[31mg[0m=function(){function e(t,n,i,o){[31mr[0m(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=o,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return [31ma[0m(e,[{key:\"resend\",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:\"send\",value:function(){this.hasReceived(\"timeout\")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:\"receive\",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:\"reset\",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:\"matchReceive\",value:function(e){var t=e.status,n=e.response;e.ref;this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:\"cancelRefEvent\",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:\"cancelTimeout\",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:\"startTimeout\",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger(\"timeout\",{})},this.timeout)}},{key:\"hasReceived\",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:\"trigger\",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),[31mk[0m=function(){function e(t,n,i){var o=this;[31mr[0m(this,e),this.state=[31md[0m.closed,this.topic=t,this.params=[31my[0m(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new [31mg[0m(this,[31mp[0m.join,this.params,this.timeout),this.pushBuffer=[],this.rejoinTimer=new E(function(){o.socket.isConnected()&&o.rejoin()},this.socket.rejoinAfterMs),this.socket.onError(function(){return o.rejoinTimer.reset()}),this.socket.onOpen(function(){o.rejoinTimer.reset(),o.isErrored()&&o.rejoin()}),this.joinPush.receive(\"ok\",function(){o.state=[31md[0m.joined,o.rejoinTimer.reset(),o.pushBuffer.forEach(function(e){return e.send()}),o.pushBuffer=[]}),this.joinPush.receive(\"error\",function(){o.state=[31md[0m.errored,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.onClose(function(){o.rejoinTimer.reset(),o.socket.hasLogger()&&o.socket.log(\"channel\",\"close \".concat(o.topic,\" \").concat(o.joinRef())),o.state=[31md[0m.closed,o.socket.remove(o)}),this.onError(function(e){o.socket.hasLogger()&&o.socket.log(\"channel\",\"error \".concat(o.topic),e),o.isJoining()&&o.joinPush.reset(),o.state=[31md[0m.errored,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.joinPush.receive(\"timeout\",function(){o.socket.hasLogger()&&o.socket.log(\"channel\",\"timeout \".concat(o.topic,\" (\").concat(o.joinRef(),\")\"),o.joinPush.timeout),new [31mg[0m(o,[31mp[0m.leave,[31my[0m({}),o.timeout).send(),o.state=[31md[0m.errored,o.joinPush.reset(),o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.on([31mp[0m.reply,function(e,t){o.trigger(o.replyEventName(t),e)})}return [31ma[0m(e,[{key:\"join\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error(\"tried to join multiple times. 'join' can only be called a single time per channel instance\");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:\"onClose\",value:function(e){this.on([31mp[0m.close,e)}},{key:\"onError\",value:function(e){return this.on([31mp[0m.error,function(t){return e(t)})}},{key:\"on\",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:\"off\",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:\"canPush\",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:\"push\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw new Error(\"tried to push '\".concat(e,\"' to '\").concat(this.topic,\"' before joining. Use channel.join() before pushing events\"));var i=new [31mg[0m(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:\"leave\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=[31md[0m.leaving;var n=function(){e.socket.hasLogger()&&e.socket.log(\"channel\",\"leave \".concat(e.topic)),e.trigger([31mp[0m.close,\"leave\")},i=new [31mg[0m(this,[31mp[0m.leave,[31my[0m({}),t);return i.receive(\"ok\",function(){return n()}).receive(\"timeout\",function(){return n()}),i.send(),this.canPush()||i.trigger(\"ok\",{}),i}},{key:\"onMessage\",value:function(e,t,n){return t}},{key:\"isLifecycleEvent\",value:function(e){return [31mv[0m.indexOf(e)>=0}},{key:\"isMember\",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log(\"channel\",\"dropping outdated message\",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:\"joinRef\",value:function(){return this.joinPush.ref}},{key:\"sendJoin\",value:function(e){this.state=[31md[0m.joining,this.joinPush.resend(e)}},{key:\"rejoin\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||this.sendJoin(e)}},{key:\"trigger\",value:function(e,t,n,i){var o=this.onMessage(e,t,n,i);if(t&&!o)throw new Error(\"channel onMessage callbacks must return the payload, modified or unmodified\");for(var r=0;r<this.bindings.length;r++){var s=this.bindings[r];s.event===e&&s.callback(o,n,i||this.joinRef())}}},{key:\"replyEventName\",value:function(e){return\"chan_reply_\".concat(e)}},{key:\"isClosed\",value:function(){return this.state===[31md[0m.closed}},{key:\"isErrored\",value:function(){return this.state===[31md[0m.errored}},{key:\"isJoined\",value:function(){return this.state===[31md[0m.joined}},{key:\"isJoining\",value:function(){return this.state===[31md[0m.joining}},{key:\"isLeaving\",value:function(){return this.state===[31md[0m.leaving}}]),e}(),[31mb[0m={encode:function(e,t){var n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))},decode:function(e,t){var n=[31mo[0m(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})}},[31mj[0m=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};[31mr[0m(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||[31mf[0m,this.transport=i.transport||[31mh[0m.WebSocket||C,this.defaultEncoder=[31mb[0m.encode,this.defaultDecoder=[31mb[0m.decode,this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||\"arraybuffer\",this.transport!==C?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),[31mu[0m&&[31mu[0m.addEventListener&&[31mu[0m.addEventListener(\"beforeunload\",function(e){n.conn&&(n.unloaded=!0,n.abnormalClose(\"unloaded\"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=[31my[0m(i.params||{}),this.endPoint=\"\".concat(t,\"/\").concat(m.websocket),this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new E(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return [31ma[0m(e,[{key:\"protocol\",value:function(){return location.protocol.match(/^https/)?\"wss\":\"ws\"}},{key:\"endPointURL\",value:function(){var e=[31mR[0m.appendParams([31mR[0m.appendParams(this.endPoint,this.params()),{vsn:\"2.0.0\"});return\"/\"!==e.charAt(0)?e:\"/\"===e.charAt(1)?\"\".concat(this.protocol(),\":\").concat(e):\"\".concat(this.protocol(),\"://\").concat(location.host).concat(e)}},{key:\"disconnect\",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:\"connect\",value:function(e){var t=this;e&&(console&&console.log(\"passing params to connect is deprecated. Instead pass :params to the Socket constructor\"),this.params=[31my[0m(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:\"log\",value:function(e,t,n){this.logger(e,t,n)}},{key:\"hasLogger\",value:function(){return null!==this.logger}},{key:\"onOpen\",value:function(e){this.stateChangeCallbacks.open.push(e)}},{key:\"onClose\",value:function(e){this.stateChangeCallbacks.close.push(e)}},{key:\"onError\",value:function(e){this.stateChangeCallbacks.error.push(e)}},{key:\"onMessage\",value:function(e){this.stateChangeCallbacks.message.push(e)}},{key:\"onConnOpen\",value:function(){this.hasLogger()&&this.log(\"transport\",\"connected to \".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return e()})}},{key:\"resetHeartbeat\",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:\"teardown\",value:function(e,t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n||\"\"):this.conn.close(),this.conn=null),e&&e()}},{key:\"onConnClose\",value:function(e){this.hasLogger()&&this.log(\"transport\",\"close\",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return t(e)})}},{key:\"onConnError\",value:function(e){this.hasLogger()&&this.log(\"transport\",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return t(e)})}},{key:\"triggerChanError\",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger([31mp[0m.error)})}},{key:\"connectionState\",value:function(){switch(this.conn&&this.conn.readyState){case [31ml[0m.connecting:return\"connecting\";case [31ml[0m.open:return\"open\";case [31ml[0m.closing:return\"closing\";default:return\"closed\"}}},{key:\"isConnected\",value:function(){return\"open\"===this.connectionState()}},{key:\"remove\",value:function(e){this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:\"channel\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new [31mk[0m(e,t,this);return this.channels.push(n),n}},{key:\"push\",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,o=e.payload,r=e.ref,s=e.join_ref;this.log(\"push\",\"\".concat(n,\" \").concat(i,\" (\").concat(s,\", \").concat(r,\")\"),o)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:\"makeRef\",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:\"sendHeartbeat\",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log(\"transport\",\"heartbeat timeout. Attempting to re-establish connection\"),void this.abnormalClose(\"heartbeat timeout\");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:\"phoenix\",event:\"heartbeat\",payload:{},ref:this.pendingHeartbeatRef})}}},{key:\"abnormalClose\",value:function(e){this.closeWasClean=!1,this.conn.close(1e3,e)}},{key:\"flushSendBuffer\",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:\"onConnMessage\",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,o=e.payload,r=e.ref,s=e.join_ref;r&&r===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log(\"receive\",\"\".concat(o.status||\"\",\" \").concat(n,\" \").concat(i,\" \").concat(r&&\"(\"+r+\")\"||\"\"),o);for(var a=0;a<t.channels.length;a++){var c=t.channels[a];c.isMember(n,i,o,s)&&c.trigger(i,o,r,s)}for(var u=0;u<t.stateChangeCallbacks.message.length;u++)t.stateChangeCallbacks.message[u](e)})}}]),e}(),C=function(){function e(t){[31mr[0m(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=[31ml[0m.connecting,this.poll()}return [31ma[0m(e,[{key:\"normalizeEndpoint\",value:function(e){return e.replace(\"ws://\",\"http://\").replace(\"wss://\",\"https://\").replace(new RegExp(\"(.*)/\"+m.websocket),\"$1/\"+m.longpoll)}},{key:\"endpointURL\",value:function(){return [31mR[0m.appendParams(this.pollEndpoint,{token:this.token})}},{key:\"closeAndRetry\",value:function(){this.close(),this.readyState=[31ml[0m.connecting}},{key:\"ontimeout\",value:function(){this.onerror(\"timeout\"),this.closeAndRetry()}},{key:\"poll\",value:function(){var e=this;this.readyState!==[31ml[0m.open&&this.readyState!==[31ml[0m.connecting||[31mR[0m.request(\"GET\",this.endpointURL(),\"application/json\",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,o=t.messages;e.token=i}else n=0;switch(n){case 200:o.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=[31ml[0m.open,e.onopen(),e.poll();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw new Error(\"unhandled poll status \".concat(n))}})}},{key:\"send\",value:function(e){var t=this;[31mR[0m.request(\"POST\",this.endpointURL(),\"application/json\",e,this.timeout,this.onerror.bind(this,\"timeout\"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:\"close\",value:function(e,t){this.readyState=[31ml[0m.closed,this.onclose()}}]),e}(),[31mR[0m=function(){function e(){[31mr[0m(this,e)}return [31ma[0m(e,null,[{key:\"request\",value:function(e,t,n,i,o,r,s){if([31mh[0m.XDomainRequest){var a=new XDomainRequest;this.xdomainRequest(a,e,t,i,o,r,s)}else{var c=[31mh[0m.XMLHttpRequest?new [31mh[0m.XMLHttpRequest:new ActiveXObject(\"Microsoft.XMLHTTP\");this.xhrRequest(c,e,t,n,i,o,r,s)}}},{key:\"xdomainRequest\",value:function(e,t,n,i,o,r,s){var a=this;e.timeout=o,e.open(t,n),e.onload=function(){var t=a.parseJSON(e.responseText);s&&s(t)},r&&(e.ontimeout=r),e.onprogress=function(){},e.send(i)}},{key:\"xhrRequest\",value:function(e,t,n,i,o,r,s,a){var c=this;e.open(t,n,!0),e.timeout=r,e.setRequestHeader(\"Content-Type\",i),e.onerror=function(){a&&a(null)},e.onreadystatechange=function(){if(e.readyState===c.states.complete&&a){var t=c.parseJSON(e.responseText);a(t)}},s&&(e.ontimeout=s),e.send(o)}},{key:\"parseJSON\",value:function(e){if(!e||\"\"===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log(\"failed to parse JSON response\",e),null}}},{key:\"serialize\",value:function(e,t){var n=[];for(var [31mo[0m in e)if(e.hasOwnProperty([31mo[0m)){var r=t?\"\".concat(t,\"[\").concat([31mo[0m,\"]\"):[31mo[0m,s=e[[31mo[0m];\"object\"===[31mi[0m(s)?n.push(this.serialize(s,r)):n.push(encodeURIComponent(r)+\"=\"+encodeURIComponent(s))}return n.join(\"&\")}},{key:\"appendParams\",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\\?/)?\"&\":\"?\";return\"\".concat(e).concat(n).concat(this.serialize(t))}}]),e}();[31mR[0m.states={complete:4};var [31mT[0m=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};[31mr[0m(this,e);var o=i.events||{state:\"presence_state\",diff:\"presence_diff\"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={on[31mCha[0mn[31mg[0me:function(){},onSync:function(){}},this.channel.on(o.state,function(t){var i=n.caller,o=i.on[31mCha[0mn[31mge[0m,r=i.onSync;n.joinRef=n.channel.joinRef(),e.syncState(n.state,t,o),n.pendingDiffs.forEach(function(t){e.syncDiff(n.state,t,o)}),n.pendingDiffs=[],[31mr[0m()}),this.channel.on(o.diff,function(t){var i=n.caller,o=i.on[31mCha[0mn[31mge[0m,r=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(e.syncDiff(n.state,t,o[31m)[0m,r())})}return [31ma[0m(e,[{key:\"on[31mC[0mhan[31mg[0me\",value:function(e){this.caller.on[31mCh[0ma[31mng[0me=e}},{key:\"onSync\",value:function(e){this.caller.onSync=e}},{key:\"list\",value:function(t){return e.list(this.state,t)}},{key:\"inPendingSyncState\",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:\"syncState\",value:function(e,t,n){var i={},[31mo[0m={};return this.map([31me[0m,function(e,n){t[e]||([31mo[0m[e]=n)}),this.map(t,function([31mt[0m,[31mn[0m){var [31mr[0m=[31me[0m[[31mt[0m];if([31mr[0m){var [31ms[0m=[31mn[0m.metas.map(function(e){return e.phx_ref}),[31ma[0m=[31mr[0m.metas.map(function(e){return e.phx_ref}),[31mc[0m=[31mn[0m.metas.filter(function(e){return [31ma[0m.indexOf(e.phx_ref)<0}),[31mu[0m=[31mr[0m.metas.filter(function(e){return [31ms[0m.indexOf(e.phx_ref)<0});[31mc[0m.length>0&&([31mi[0m[[31mt[0m]=[31mn[0m,[31mi[0m[[31mt[0m].metas=[31mc[0m),[31mu[0m.length>0&&([31mo[0m[[31mt[0m]=n,[31mo[0m[[31mt[0m].metas=[31mu[0m)}else [31mi[0m[[31mt[0m]=[31mn[0m}),this.syncDiff([31me[0m,{joins:[31mi[0m,leaves:[31mo[0m},n)}},{key:\"syncDiff\",value:function(e,t,n){var [31mi[0m=t.joins,[31mo[0m=t.leaves,[31mr[0m=[31m{}[0m;return [31mthis.map[0m([31mi,[0mfunction([31me,t[0m){[31mr[e]={joinedMetas:t.metas,leftMetas:[],update:t[0m}[31m}[0m),[31mthis.map[0m(o[31m,[0mfunction([31me,t[0m){[31mr[e]?r[e].leftMetas=t.metas:r[e]={joinedMetas:[],leftMetas:t.metas,update:t[0m}[31m}[0m),this.map(r,function([31mt[0m,[31mi[0m){var o=[31mi.joinedMet[0ma[31ms,r=i.l[0mef[31mtM[0meta[31ms[0m,s=[31mi.upd[0ma[31mt[0me[31m,[0ma[31m=o[0m.map(function(e){return e.phx_ref}),c=[31mr[0m.ma[31mp[0m(function(e){return e.phx_ref})[31m,u[0m=[31me[0m[[31mt[0m][31m,h={[0mmetas[31m:[0mu[31m?u[0m.[31mm[0met[31mas:[][0m}[31m;[0mh.meta[31ms[0m=[31mh[0m.metas.[31mfilter[0m(function(e){return[31m-1===a.ind[0me[31mxOf(e[0m.phx_ref[31m)[0m})[31m.co[0mn[31mc[0mat[31m(o)[0m.filter(function(e){return[31m-1===c[0m.indexOf(e.phx_ref)}),[31mObject.keys(s).f[0mo[31mrEach[0m([31mfu[0mn[31mc[0mt[31mion(e[0m)[31m{\"metas\"!==e&&(h[e]=s[e])})[0m,0===[31mh[0m.metas.length[31m?[0mdelete [31me[0m[[31mt]:[0me[31m[t[0m][31m=h,n&&n(t,u,h)[0m}),[31me[0m}},{key:\"list\",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:\"map\",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}}]),e}(),E=function(){function e(t,n){[31mr[0m(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return [31ma[0m(e,[{key:\"reset\",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:\"scheduleTimeout\",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])});"
     [36mright: [0m"!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.Phoenix=t():e.Phoenix=t()}(this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){\"use strict\";function i(e){return[32m function[0m([32me){[0mi[32mf(Array.isArray(e)){for(var t[0m=[32m0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||[0m\"[32m[object Arguments]\"===Object.prototype.toString.call(e))return Array.[0mf[32mrom(e)}(e)||f[0munction[32m(){throw new TypeError([0m\"[32mInvalid attempt to spread non-iterable instance\")}()}function o(e){return(o[0m=[32m\"function\"=[0m=typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function [32mr[0m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function [32ms[0m(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function [32ma[0m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function [32mc[0m(e,t,n){return t&&[32ma[0m(e.prototype,t),n&&[32ma[0m(e,n),e}n.r(t),n.d(t,\"Channel\",function(){return [32mb[0m}),n.d(t,\"Serializer\",function(){return [32mj[0m}),n.d(t,\"Socket\",function(){return [32mR[0m}),n.d(t,\"LongPoll\",function(){return C}),n.d(t,\"Ajax\",function(){return [32mT[0m}),n.d(t,\"Presence\",function(){return [32mw[0m});var [32mu[0m=\"undefined\"!=typeof self?self:null,[32mh[0m=\"undefined\"!=typeof window?window:null,[32ml[0m=[32mu[0m||[32mh[0m||void 0,[32mf[0m={connecting:0,open:1,closing:2,closed:3},[32md[0m=1e4,[32mp[0m={closed:\"closed\",errored:\"errored\",joined:\"joined\",joining:\"joining\",leaving:\"leaving\"},[32mv[0m={close:\"phx_close\",error:\"phx_error\",join:\"phx_join\",reply:\"phx_reply\",leave:\"phx_leave\"},[32my[0m=[[32mv[0m.close,[32mv[0m.error,[32mv[0m.join,[32mv[0m.reply,[32mv[0m.leave],m={longpoll:\"longpoll\",websocket:\"websocket\"},[32mg[0m=function(e){if(\"function\"==typeof e)return e;return function(){return e}},[32mk[0m=function(){function e(t,n,i,o){[32ms[0m(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=o,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return [32mc[0m(e,[{key:\"resend\",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:\"send\",value:function(){this.hasReceived(\"timeout\")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:\"receive\",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:\"reset\",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:\"matchReceive\",value:function(e){var t=e.status,n=e.response;e.ref;this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:\"cancelRefEvent\",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:\"cancelTimeout\",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:\"startTimeout\",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger(\"timeout\",{})},this.timeout)}},{key:\"hasReceived\",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:\"trigger\",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),[32mb[0m=function(){function e(t,n,i){var o=this;[32ms[0m(this,e),this.state=[32mp[0m.closed,this.topic=t,this.params=[32mg[0m(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new [32mk[0m(this,[32mv[0m.join,this.params,this.timeout),this.pushBuffer=[],this.rejoinTimer=new E(function(){o.socket.isConnected()&&o.rejoin()},this.socket.rejoinAfterMs),this.socket.onError(function(){return o.rejoinTimer.reset()}),this.socket.onOpen(function(){o.rejoinTimer.reset(),o.isErrored()&&o.rejoin()}),this.joinPush.receive(\"ok\",function(){o.state=[32mp[0m.joined,o.rejoinTimer.reset(),o.pushBuffer.forEach(function(e){return e.send()}),o.pushBuffer=[]}),this.joinPush.receive(\"error\",function(){o.state=[32mp[0m.errored,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.onClose(function(){o.rejoinTimer.reset(),o.socket.hasLogger()&&o.socket.log(\"channel\",\"close \".concat(o.topic,\" \").concat(o.joinRef())),o.state=[32mp[0m.closed,o.socket.remove(o)}),this.onError(function(e){o.socket.hasLogger()&&o.socket.log(\"channel\",\"error \".concat(o.topic),e),o.isJoining()&&o.joinPush.reset(),o.state=[32mp[0m.errored,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.joinPush.receive(\"timeout\",function(){o.socket.hasLogger()&&o.socket.log(\"channel\",\"timeout \".concat(o.topic,\" (\").concat(o.joinRef(),\")\"),o.joinPush.timeout),new [32mk[0m(o,[32mv[0m.leave,[32mg[0m({}),o.timeout).send(),o.state=[32mp[0m.errored,o.joinPush.reset(),o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.on([32mv[0m.reply,function(e,t){o.trigger(o.replyEventName(t),e)})}return [32mc[0m(e,[{key:\"join\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error(\"tried to join multiple times. 'join' can only be called a single time per channel instance\");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:\"onClose\",value:function(e){this.on([32mv[0m.close,e)}},{key:\"onError\",value:function(e){return this.on([32mv[0m.error,function(t){return e(t)})}},{key:\"on\",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:\"off\",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:\"canPush\",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:\"push\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw new Error(\"tried to push '\".concat(e,\"' to '\").concat(this.topic,\"' before joining. Use channel.join() before pushing events\"));var i=new [32mk[0m(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:\"leave\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=[32mp[0m.leaving;var n=function(){e.socket.hasLogger()&&e.socket.log(\"channel\",\"leave \".concat(e.topic)),e.trigger([32mv[0m.close,\"leave\")},i=new [32mk[0m(this,[32mv[0m.leave,[32mg[0m({}),t);return i.receive(\"ok\",function(){return n()}).receive(\"timeout\",function(){return n()}),i.send(),this.canPush()||i.trigger(\"ok\",{}),i}},{key:\"onMessage\",value:function(e,t,n){return t}},{key:\"isLifecycleEvent\",value:function(e){return [32my[0m.indexOf(e)>=0}},{key:\"isMember\",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log(\"channel\",\"dropping outdated message\",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:\"joinRef\",value:function(){return this.joinPush.ref}},{key:\"sendJoin\",value:function(e){this.state=[32mp[0m.joining,this.joinPush.resend(e)}},{key:\"rejoin\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||this.sendJoin(e)}},{key:\"trigger\",value:function(e,t,n,i){var o=this.onMessage(e,t,n,i);if(t&&!o)throw new Error(\"channel onMessage callbacks must return the payload, modified or unmodified\");for(var r=0;r<this.bindings.length;r++){var s=this.bindings[r];s.event===e&&s.callback(o,n,i||this.joinRef())}}},{key:\"replyEventName\",value:function(e){return\"chan_reply_\".concat(e)}},{key:\"isClosed\",value:function(){return this.state===[32mp[0m.closed}},{key:\"isErrored\",value:function(){return this.state===[32mp[0m.errored}},{key:\"isJoined\",value:function(){return this.state===[32mp[0m.joined}},{key:\"isJoining\",value:function(){return this.state===[32mp[0m.joining}},{key:\"isLeaving\",value:function(){return this.state===[32mp[0m.leaving}}]),e}(),[32mj[0m={encode:function(e,t){var n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))},decode:function(e,t){var n=[32mr[0m(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})}},[32mR[0m=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};[32ms[0m(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||[32md[0m,this.transport=i.transport||[32ml[0m.WebSocket||C,this.defaultEncoder=[32mj[0m.encode,this.defaultDecoder=[32mj[0m.decode,this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||\"arraybuffer\",this.transport!==C?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),[32mh[0m&&[32mh[0m.addEventListener&&[32mh[0m.addEventListener(\"beforeunload\",function(e){n.conn&&(n.unloaded=!0,n.abnormalClose(\"unloaded\"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=[32mg[0m(i.params||{}),this.endPoint=\"\".concat(t,\"/\").concat(m.websocket),this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new E(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return [32mc[0m(e,[{key:\"protocol\",value:function(){return location.protocol.match(/^https/)?\"wss\":\"ws\"}},{key:\"endPointURL\",value:function(){var e=[32mT[0m.appendParams([32mT[0m.appendParams(this.endPoint,this.params()),{vsn:\"2.0.0\"});return\"/\"!==e.charAt(0)?e:\"/\"===e.charAt(1)?\"\".concat(this.protocol(),\":\").concat(e):\"\".concat(this.protocol(),\"://\").concat(location.host).concat(e)}},{key:\"disconnect\",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:\"connect\",value:function(e){var t=this;e&&(console&&console.log(\"passing params to connect is deprecated. Instead pass :params to the Socket constructor\"),this.params=[32mg[0m(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:\"log\",value:function(e,t,n){this.logger(e,t,n)}},{key:\"hasLogger\",value:function(){return null!==this.logger}},{key:\"onOpen\",value:function(e){this.stateChangeCallbacks.open.push(e)}},{key:\"onClose\",value:function(e){this.stateChangeCallbacks.close.push(e)}},{key:\"onError\",value:function(e){this.stateChangeCallbacks.error.push(e)}},{key:\"onMessage\",value:function(e){this.stateChangeCallbacks.message.push(e)}},{key:\"onConnOpen\",value:function(){this.hasLogger()&&this.log(\"transport\",\"connected to \".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return e()})}},{key:\"resetHeartbeat\",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:\"teardown\",value:function(e,t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n||\"\"):this.conn.close(),this.conn=null),e&&e()}},{key:\"onConnClose\",value:function(e){this.hasLogger()&&this.log(\"transport\",\"close\",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return t(e)})}},{key:\"onConnError\",value:function(e){this.hasLogger()&&this.log(\"transport\",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return t(e)})}},{key:\"triggerChanError\",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger([32mv[0m.error)})}},{key:\"connectionState\",value:function(){switch(this.conn&&this.conn.readyState){case [32mf[0m.connecting:return\"connecting\";case [32mf[0m.open:return\"open\";case [32mf[0m.closing:return\"closing\";default:return\"closed\"}}},{key:\"isConnected\",value:function(){return\"open\"===this.connectionState()}},{key:\"remove\",value:function(e){this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:\"channel\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new [32mb[0m(e,t,this);return this.channels.push(n),n}},{key:\"push\",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,o=e.payload,r=e.ref,s=e.join_ref;this.log(\"push\",\"\".concat(n,\" \").concat(i,\" (\").concat(s,\", \").concat(r,\")\"),o)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:\"makeRef\",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:\"sendHeartbeat\",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log(\"transport\",\"heartbeat timeout. Attempting to re-establish connection\"),void this.abnormalClose(\"heartbeat timeout\");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:\"phoenix\",event:\"heartbeat\",payload:{},ref:this.pendingHeartbeatRef})}}},{key:\"abnormalClose\",value:function(e){this.closeWasClean=!1,this.conn.close(1e3,e)}},{key:\"flushSendBuffer\",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:\"onConnMessage\",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,o=e.payload,r=e.ref,s=e.join_ref;r&&r===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log(\"receive\",\"\".concat(o.status||\"\",\" \").concat(n,\" \").concat(i,\" \").concat(r&&\"(\"+r+\")\"||\"\"),o);for(var a=0;a<t.channels.length;a++){var c=t.channels[a];c.isMember(n,i,o,s)&&c.trigger(i,o,r,s)}for(var u=0;u<t.stateChangeCallbacks.message.length;u++)t.stateChangeCallbacks.message[u](e)})}}]),e}(),C=function(){function e(t){[32ms[0m(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=[32mf[0m.connecting,this.poll()}return [32mc[0m(e,[{key:\"normalizeEndpoint\",value:function(e){return e.replace(\"ws://\",\"http://\").replace(\"wss://\",\"https://\").replace(new RegExp(\"(.*)/\"+m.websocket),\"$1/\"+m.longpoll)}},{key:\"endpointURL\",value:function(){return [32mT[0m.appendParams(this.pollEndpoint,{token:this.token})}},{key:\"closeAndRetry\",value:function(){this.close(),this.readyState=[32mf[0m.connecting}},{key:\"ontimeout\",value:function(){this.onerror(\"timeout\"),this.closeAndRetry()}},{key:\"poll\",value:function(){var e=this;this.readyState!==[32mf[0m.open&&this.readyState!==[32mf[0m.connecting||[32mT[0m.request(\"GET\",this.endpointURL(),\"application/json\",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,o=t.messages;e.token=i}else n=0;switch(n){case 200:o.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=[32mf[0m.open,e.onopen(),e.poll();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw new Error(\"unhandled poll status \".concat(n))}})}},{key:\"send\",value:function(e){var t=this;[32mT[0m.request(\"POST\",this.endpointURL(),\"application/json\",e,this.timeout,this.onerror.bind(this,\"timeout\"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:\"close\",value:function(e,t){this.readyState=[32mf[0m.closed,this.onclose()}}]),e}(),[32mT[0m=function(){function e(){[32ms[0m(this,e)}return [32mc[0m(e,null,[{key:\"request\",value:function(e,t,n,i,o,r,s){if([32ml[0m.XDomainRequest){var a=new XDomainRequest;this.xdomainRequest(a,e,t,i,o,r,s)}else{var c=[32ml[0m.XMLHttpRequest?new [32ml[0m.XMLHttpRequest:new ActiveXObject(\"Microsoft.XMLHTTP\");this.xhrRequest(c,e,t,n,i,o,r,s)}}},{key:\"xdomainRequest\",value:function(e,t,n,i,o,r,s){var a=this;e.timeout=o,e.open(t,n),e.onload=function(){var t=a.parseJSON(e.responseText);s&&s(t)},r&&(e.ontimeout=r),e.onprogress=function(){},e.send(i)}},{key:\"xhrRequest\",value:function(e,t,n,i,o,r,s,a){var c=this;e.open(t,n,!0),e.timeout=r,e.setRequestHeader(\"Content-Type\",i),e.onerror=function(){a&&a(null)},e.onreadystatechange=function(){if(e.readyState===c.states.complete&&a){var t=c.parseJSON(e.responseText);a(t)}},s&&(e.ontimeout=s),e.send(o)}},{key:\"parseJSON\",value:function(e){if(!e||\"\"===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log(\"failed to parse JSON response\",e),null}}},{key:\"serialize\",value:function(e,t){var n=[];for(var [32mi[0m in e)if(e.hasOwnProperty([32mi[0m)){var r=t?\"\".concat(t,\"[\").concat([32mi[0m,\"]\"):[32mi[0m,s=e[[32mi[0m];\"object\"===[32mo[0m(s)?n.push(this.serialize(s,r)):n.push(encodeURIComponent(r)+\"=\"+encodeURIComponent(s))}return n.join(\"&\")}},{key:\"appendParams\",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\\?/)?\"&\":\"?\";return\"\".concat(e).concat(n).concat(this.serialize(t))}}]),e}();[32mT[0m.states={complete:4};var [32mw[0m=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};[32ms[0m(this,e);var o=i.events||{state:\"presence_state\",diff:\"presence_diff\"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={on[32mJoi[0mn[32m:function(){},onL[0me[32mave[0m:function(){},onSync:function(){}},this.channel.on(o.state,function(t){var i=n.caller,o=i.on[32mJoi[0mn,r=i.on[32mLeave,s=i.on[0mSync;n.joinRef=n.channel.joinRef(),[32mn.stat[0me[32m=e[0m.syncState(n.state,t,o[32m,r[0m),n.pendingDiffs.forEach(function(t){[32mn.stat[0me[32m=e[0m.syncDiff(n.state,t,o[32m,r[0m)}),n.pendingDiffs=[],[32ms[0m()}),this.channel.on(o.diff,function(t){var i=n.caller,o=i.on[32mJoi[0mn,r=i.on[32mLeave,s=i.on[0mSync;n.inPendingSyncState()?n.pendingDiffs.push(t):([32mn.stat[0me[32m=e[0m.syncDiff(n.state,t,o,r[32m),s[0m())})}return [32mc[0m(e,[{key:\"on[32mJoin\",value:function(e){t[0mh[32mis.c[0ma[32mller.o[0mn[32mJoin=[0me[32m}},{key:[0m\"[32monLeave\"[0m,value:function(e){this.caller.on[32mLe[0ma[32mv[0me=e}},{key:\"onSync\",value:function(e){this.caller.onSync=e}},{key:\"list\",value:function(t){return e.list(this.state,t)}},{key:\"inPendingSyncState\",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:\"syncState\",value:function(e,t,n[32m,i[0m){var [32mo=th[0mi[32ms,r[0m=[32mthis.clone(e),s=[0m{},[32ma[0m={};return this.map([32mr[0m,function(e,n){t[e]||([32ma[0m[e]=n)}),this.map(t,function([32me[0m,[32mt[0m){var [32mn[0m=[32mr[0m[[32me[0m];if([32mn[0m){var [32mi[0m=[32mt[0m.metas.map(function(e){return e.phx_ref}),[32mc[0m=[32mn[0m.metas.map(function(e){return e.phx_ref}),[32mu[0m=[32mt[0m.metas.filter(function(e){return [32mc[0m.indexOf(e.phx_ref)<0}),[32mh[0m=[32mn[0m.metas.filter(function(e){return [32mi[0m.indexOf(e.phx_ref)<0});[32mu[0m.length>0&&([32ms[0m[[32me[0m]=[32mt[0m,[32ms[0m[[32me[0m].metas=[32mu[0m),[32mh[0m.length>0&&([32ma[0m[[32me[0m]=[32mo.clo[0mn[32me(n)[0m,[32ma[0m[[32me[0m].metas=[32mh[0m)}else [32ms[0m[[32me[0m]=[32mt[0m}),this.syncDiff([32mr[0m,{joins:[32ms[0m,leaves:[32ma[0m},n[32m,i[0m)}},{key:\"syncDiff\",value:function(e,t,n[32m,o[0m){var [32mr[0m=t.joins,[32ms[0m=t.leaves,[32ma[0m=[32mthis.clone(e)[0m;return [32mn||[0m([32mn=[0mfunction(){}),[32mo||[0m(o[32m=[0mfunction(){}),this.map(r,function([32me[0m,[32mt[0m){var o=a[32m[[0me[32m];i[0mf[32m(a[[0me[32m]=[0mt[32m,o){v[0ma[32mr r[0m,s=a[32m[[0me[32m].met[0ma[32ms[0m.map(function(e){return e.phx_ref}),c=[32mo[0m.m[32met[0ma[32ms.filter[0m(function(e){return [32ms.ind[0me[32mxOf(e[0m.phx_ref[32m)<0[0m})[32m;(r[0m=[32ma[0m[[32me[0m][32m.[0mmetas[32m).[0mu[32mnshift[0m.[32mapply(r,i(c))}n([0me[32m,o,[0mt[32m)[0m}[32m),t[0mh[32mis[0m.m[32map(s,function([0me[32m,[0mt[32m){v[0ma[32mr n[0m=[32ma[e];if(n){var i=t[0m.metas.[32mmap[0m(function(e){return[48;5;28m [0me.phx_ref})[32m;[0mn[32m.met[0ma[32ms=n.me[0mt[32mas[0m.filter(function(e){return[32m i[0m.indexOf(e.phx_ref)[32m<0[0m}),o([32me,[0mn[32m,[0mt),0===[32mn[0m.metas.length[32m&&[0mdelete [32ma[0m[e][32m}[0m}),[32ma[0m}},{key:\"list\",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:\"map\",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}}[32m,{key:\"clone\",value:function(e){return JSON.parse(JSON.stringify(e))}}[0m]),e}(),E=function(){function e(t,n){[32ms[0m(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return [32mc[0m(e,[{key:\"reset\",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:\"scheduleTimeout\",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])});"
     [36mstacktrace:[0m
       test/mix/tasks/phx.new_test.exs:98: anonymous fn/2 in Mix.Tasks.Phx.NewTest."test assets are in sync with installer"/1
       (elixir) lib/enum.ex:1899: Enum."-reduce/3-lists^foldl/2-0-"/3
       test/mix/tasks/phx.new_test.exs:97: (test)

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m

Finished in 20.2 seconds
[31m17 doctests, 656 tests, 1 failure, 3 skipped[0m

Randomized with seed 630761
travis_time:end:1a47151c:start=1565022201702026956,finish=1565022243880843938,duration=42178816982[0K[31;1mThe command "mix test" exited with 1.[0m

travis_time:start:15f9746d[0K$ cd installer && elixir -S mix test
Compiling 10 files (.ex)
Generated phx_new app
[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m

Finished in 2.7 seconds
[32m37 tests, 0 failures[0m

Randomized with seed 376124
travis_time:end:15f9746d:start=1565022243892535769,finish=1565022248193739911,duration=4301204142[0K[32;1mThe command "cd installer && elixir -S mix test" exited with 0.[0m

travis_time:start:1d62d748[0K$ cd ../assets && npm install && npm test
[37m[40mnpm[0m [0m[30m[43mWARN[0m [0m[35moptional[0m Skipping failed optional dependency /chokidar/fsevents:
[0m[37m[40mnpm[0m [0m[30m[43mWARN[0m [0m[35mnotsup[0m Not compatible with your operating system or architecture: fsevents@1.2.9
[0m
> phoenix@1.4.0 test /home/travis/build/phoenixframework/phoenix/assets
> mocha ./test/**/*.js --exit -r @babel/register -r jsdom-global/register


[0m[0m
[0m  with transport[0m
[0m    constructor[0m
    [32m  ✓[0m[90m sets defaults[0m
    [32m  ✓[0m[90m sets up joinPush objec with literal params[0m
    [32m  ✓[0m[90m sets up joinPush objec with closure params[0m
[0m    updating join params[0m
    [32m  ✓[0m[90m can update the join params[0m
[0m    join[0m
    [32m  ✓[0m[90m sets state to joining[0m
    [32m  ✓[0m[90m sets joinedOnce to true[0m
    [32m  ✓[0m[90m throws if attempting to join multiple times[0m
    [32m  ✓[0m[90m triggers socket push with channel params[0m
    [32m  ✓[0m[90m can set timeout on joinPush[0m
[0m      timeout behavior[0m
      [32m  ✓[0m[90m succeeds before timeout[0m
      [32m  ✓[0m[90m retries with backoff after timeout[0m
      [32m  ✓[0m[90m with socket and join delay[0m
      [32m  ✓[0m[90m with socket delay only[0m
[0m    joinPush[0m
[0m      receives 'ok'[0m
      [32m  ✓[0m[90m sets channel state to joined[0m
      [32m  ✓[0m[90m triggers receive('ok') callback after ok response[0m
      [32m  ✓[0m[90m triggers receive('ok') callback if ok response already received[0m
      [32m  ✓[0m[90m does not trigger other receive callbacks after ok response[0m
      [32m  ✓[0m[90m clears timeoutTimer[0m
      [32m  ✓[0m[90m sets receivedResp[0m
      [32m  ✓[0m[90m removes channel bindings[0m
      [32m  ✓[0m[90m sets channel state to joined[0m
      [32m  ✓[0m[90m resets channel rejoinTimer[0m
      [32m  ✓[0m[90m sends and empties channel's buffered pushEvents[0m
[0m      receives 'timeout'[0m
      [32m  ✓[0m[90m sets channel state to errored[0m
      [32m  ✓[0m[90m triggers receive('timeout') callback after ok response[0m
      [32m  ✓[0m[90m does not trigger other receive callbacks after timeout response[0m
      [32m  ✓[0m[90m schedules rejoinTimer timeout[0m
[0m      receives 'error'[0m
      [32m  ✓[0m[90m triggers receive('error') callback after error response[0m
      [32m  ✓[0m[90m triggers receive('error') callback if error response already received[0m
      [32m  ✓[0m[90m does not trigger other receive callbacks after error response[0m
      [32m  ✓[0m[90m clears timeoutTimer[0m
      [32m  ✓[0m[90m sets receivedResp with error trigger after binding[0m
      [32m  ✓[0m[90m sets receivedResp with error trigger before binding[0m
      [32m  ✓[0m[90m does not set channel state to joined[0m
      [32m  ✓[0m[90m does not trigger channel's buffered pushEvents[0m
[0m    onError[0m
    [32m  ✓[0m[90m sets state to 'errored'[0m
    [32m  ✓[0m[90m does not trigger redudant errors during backoff[0m
    [32m  ✓[0m[90m does not rejoin if channel leaving[0m
    [32m  ✓[0m[90m does not rejoin if channel closed[0m
    [32m  ✓[0m[90m triggers additional callbacks after join[0m
[0m    onClose[0m
    [32m  ✓[0m[90m sets state to 'closed'[0m
    [32m  ✓[0m[90m does not rejoin[0m
    [32m  ✓[0m[90m triggers additional callbacks[0m
    [32m  ✓[0m[90m removes channel from socket[0m
[0m    onMessage[0m
    [32m  ✓[0m[90m returns payload by default[0m
[0m    canPush[0m
    [32m  ✓[0m[90m returns true when socket connected and channel joined[0m
    [32m  ✓[0m[90m otherwise returns false[0m
[0m    on[0m
    [32m  ✓[0m[90m sets up callback for event[0m
    [32m  ✓[0m[90m other event callbacks are ignored[0m
    [32m  ✓[0m[90m generates unique refs for callbacks[0m
[0m    off[0m
    [32m  ✓[0m[90m removes all callbacks for event[0m
    [32m  ✓[0m[90m removes callback by its ref[0m
[0m    push[0m
    [32m  ✓[0m[90m sends push event when successfully joined[0m
    [32m  ✓[0m[90m enqueues push event to be sent once join has succeeded[0m
    [32m  ✓[0m[90m does not push if channel join times out[0m
    [32m  ✓[0m[90m uses channel timeout by default[0m
    [32m  ✓[0m[90m accepts timeout arg[0m
    [32m  ✓[0m[90m does not time out after receiving 'ok'[0m
    [32m  ✓[0m[90m throws if channel has not been joined[0m
[0m    leave[0m
    [32m  ✓[0m[90m unsubscribes from server events[0m
    [32m  ✓[0m[90m closes channel on 'ok' from server[0m
    [32m  ✓[0m[90m sets state to closed on 'ok' event[0m
    [36m  - sets state to leaving initially[0m
    [36m  - closes channel on 'timeout'[0m
    [36m  - accepts timeout arg[0m

[0m  syncState[0m
  [32m  ✓[0m[90m syncs empty state[0m
  [32m  ✓[0m[90m invokes onChange on joins and leaves[0m

[0m  syncDiff[0m
  [32m  ✓[0m[90m syncs empty state[0m
  [32m  ✓[0m[90m removes presence when meta is empty and adds additional meta[0m
  [32m  ✓[0m[90m removes meta while leaving key if other metas exist[0m
  [32m  ✓[0m[90m calls onChange function on update[0m
  [32m  ✓[0m[90m calls onChange function on leave[0m
  [32m  ✓[0m[90m calls onChange with latest custom state[0m

[0m  list[0m
  [32m  ✓[0m[90m lists full presence by default[0m
  [32m  ✓[0m[90m lists with custom function[0m

[0m  instance[0m
  [32m  ✓[0m[90m syncs state and diffs[0m
  [32m  ✓[0m[90m applies pending diff if state is not yet synced[0m
  [32m  ✓[0m[90m allows custom channel events[0m

[0m  with transports[0m
[0m    constructor[0m
    [32m  ✓[0m[90m sets defaults[0m
    [32m  ✓[0m[90m supports closure or literal params[0m
    [32m  ✓[0m[90m overrides some defaults with options[0m
[0m      with Websocket[0m
      [32m  ✓[0m[90m defaults to Websocket transport if available[0m
[0m    protocol[0m
    [32m  ✓[0m[90m returns wss when location.protocol is https[0m
    [32m  ✓[0m[90m returns ws when location.protocol is http[0m
[0m    endpointURL[0m
    [32m  ✓[0m[90m returns endpoint for given full url[0m
    [32m  ✓[0m[90m returns endpoint for given protocol-relative url[0m
    [32m  ✓[0m[90m returns endpoint for given path on https host[0m
    [32m  ✓[0m[90m returns endpoint for given path on http host[0m
[0m    connect with WebSocket[0m
    [32m  ✓[0m[90m establishes websocket connection with endpoint[0m
    [32m  ✓[0m[90m sets callbacks for connection[0m
    [32m  ✓[0m[90m is idempotent[0m
[0m    connect with long poll[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m establishes long poll connection with endpoint[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m sets callbacks for connection[0m
    [32m  ✓[0m[90m is idempotent[0m
[0m    disconnect[0m
    [32m  ✓[0m[90m removes existing connection[0m
    [32m  ✓[0m[90m calls callback[0m
    [32m  ✓[0m[90m calls connection close callback[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m does not throw when no connection[0m
[0m    connectionState[0m
    [32m  ✓[0m[90m defaults to closed[0m
    [32m  ✓[0m[90m returns closed if readyState unrecognized[0m
    [32m  ✓[0m[90m returns connecting[0m
    [32m  ✓[0m[90m returns open[0m
    [32m  ✓[0m[90m returns closing[0m
    [32m  ✓[0m[90m returns closed[0m
[0m    channel[0m
    [32m  ✓[0m[90m returns channel with given topic and params[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m adds channel to sockets channels list[0m
[0m    remove[0m
    [32m  ✓[0m[90m removes given channel from channels[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
[0m    push[0m
    [32m  ✓[0m[90m sends data to connection when connected[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m buffers data when not connected[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
[0m    makeRef[0m
    [32m  ✓[0m[90m returns next message ref[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m restarts for overflow[0m
[0m    sendHeartbeat[0m
    [32m  ✓[0m[90m closes socket when heartbeat is not ack'd within heartbeat window[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m pushes heartbeat data when connected[0m
    [32m  ✓[0m[90m no ops when not connected[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
[0m    flushSendBuffer[0m
    [32m  ✓[0m[90m calls callbacks in buffer when connected[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m empties sendBuffer[0m
[0m    onConnOpen[0m
    [32m  ✓[0m[90m flushes the send buffer[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m resets reconnectTimer[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m triggers onOpen callback[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
[0m    onConnClose[0m
    [32m  ✓[0m[90m schedules reconnectTimer timeout if normal close[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m does not schedule reconnectTimer timeout if normal close after explicit disconnect[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m schedules reconnectTimer timeout if not normal close[0m
    [32m  ✓[0m[90m schedules reconnectTimer timeout if connection cannot be made after a previous clean disconnect[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m triggers onClose callback[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m triggers channel error if joining[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m triggers channel error if joined[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m does not trigger channel error after leave[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
[0m    onConnError[0m
    [32m  ✓[0m[90m triggers onClose callback[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m triggers channel error if joining[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m triggers channel error if joined[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m does not trigger channel error after leave[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
[0m    onConnMessage[0m
    [32m  ✓[0m[90m parses raw message and triggers channel event[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m triggers onMessage callback[0m
[0m    custom encoder and decoder[0m
    [32m  ✓[0m[90m encodes to JSON array by default[0m
    [32m  ✓[0m[90m allows custom encoding when using WebSocket transport[0m
WebSocket connection to 'ws://example.com/socket/websocket?vsn=2.0.0' failed
    [32m  ✓[0m[90m forces JSON encoding when using LongPoll transport[0m
    [32m  ✓[0m[90m decodes JSON by default[0m
    [32m  ✓[0m[90m allows custom decoding when using WebSocket transport[0m
    [32m  ✓[0m[90m forces JSON decoding when using LongPoll transport[0m


[92m [0m[32m 136 passing[0m[90m (514ms)[0m
[36m [0m[36m 3 pending[0m

travis_time:end:1d62d748:start=1565022248205667197,finish=1565022257512984325,duration=9307317128[0K[32;1mThe command "cd ../assets && npm install && npm test" exited with 0.[0m

travis_fold:start:cache.2[0Kstore build cache
travis_time:start:2f05f64d[0Ktravis_time:end:2f05f64d:start=1565022257539652812,finish=1565022257543377188,duration=3724376[0Ktravis_time:start:04438524[0K[32;1mchanges detected (content changed, file is created, or file is deleted):\n/home/travis/build/phoenixframework/phoenix/assets/node_modules/.cache/@babel/register/.babel.7.5.5.development.json\n[0m
[32;1mchanges detected, packing new archive[0m
[32;1muploading PR.3510/cache-linux-xenial-12e80c936f50a05df7003bc4c6c1947b55a55335378e7600f2ff88698c663c69--otp-19.3--elixir-1.6.tgz[0m
[32;1mcache uploaded[0m
travis_time:end:04438524:start=1565022257553305867,finish=1565022261090658645,duration=3537352778[0Ktravis_fold:end:cache.2[0K
travis_fold:start:after_script.1[0Ktravis_time:start:01009dfa[0K$ cd $TRAVIS_BUILD_DIR
travis_time:end:01009dfa:start=1565022261117243660,finish=1565022261120502147,duration=3258487[0Ktravis_fold:end:after_script.1[0Ktravis_fold:start:after_script.2[0Ktravis_time:start:27f71a00[0K$ MIX_ENV=docs mix inch.report
==> nimble_parsec
Compiling 4 files (.ex)
Generated nimble_parsec app
==> makeup
Compiling 45 files (.ex)
Generated makeup app
===> Compiling ranch
===> Compiling telemetry
==> jason
Compiling 7 files (.ex)
Generated jason app
[33mwarning: [0mString.strip/1 is deprecated, use String.trim/1
  /home/travis/build/phoenixframework/phoenix/deps/poison/mix.exs:4

==> poison
Compiling 4 files (.ex)
[33mwarning: [0mInteger.to_char_list/2 is deprecated, use Integer.to_charlist/2
  lib/poison/encoder.ex:173

Generated poison app
==> earmark
Compiling 1 file (.yrl)
Compiling 2 files (.xrl)
Compiling 3 files (.erl)
Compiling 24 files (.ex)
Generated earmark app
==> makeup_elixir
Compiling 4 files (.ex)
[33mwarning: [0mmodule attribute @impl was not set for function root_element/1 callback (specified in Makeup.Lexer). This either means you forgot to add the "@impl true" annotation before the definition or that you are accidentally overriding this callback
  lib/makeup/lexers/elixir_lexer.ex:449

[33mwarning: [0mmodule attribute @impl was not set for function root/1 callback (specified in Makeup.Lexer). This either means you forgot to add the "@impl true" annotation before the definition or that you are accidentally overriding this callback
  lib/makeup/lexers/elixir_lexer.ex:454

Generated makeup_elixir app
==> ex_doc
[31m[1mwarning: the dependency :ex_doc requires Elixir "~> 1.7" but you are running on v1.6.6[0m
Compiling 19 files (.ex)
[33mwarning: [0mfunction Code.fetch_docs/1 is undefined or private. Did you mean one of:

      * get_docs/2

Found at 2 locations:
  lib/ex_doc/retriever.ex:90
  lib/ex_doc/retriever.ex:304

[33mwarning: [0mfunction Code.Typespec.fetch_callbacks/1 is undefined (module Code.Typespec is not available)
  lib/ex_doc/retriever.ex:388

[33mwarning: [0mfunction Code.Typespec.fetch_specs/1 is undefined (module Code.Typespec is not available)
  lib/ex_doc/retriever.ex:373

[33mwarning: [0mfunction Code.Typespec.spec_to_quoted/2 is undefined (module Code.Typespec is not available)
Found at 2 locations:
  lib/ex_doc/retriever.ex:259
  lib/ex_doc/retriever.ex:348

[33mwarning: [0mfunction Code.Typespec.type_to_quoted/1 is undefined (module Code.Typespec is not available)
  lib/ex_doc/retriever.ex:422

Generated ex_doc app
==> phoenix_pubsub
Compiling 10 files (.ex)
Generated phoenix_pubsub app
===> Compiling cowlib
===> Compiling cowboy
==> mime
Compiling 2 files (.ex)
Generated mime app
==> inch_ex
Compiling 15 files (.ex)
[33mwarning: [0mString.strip/1 is deprecated, use String.trim/1
  lib/inch_ex/git.ex:36

[33mwarning: [0mString.strip/1 is deprecated, use String.trim/1
  lib/inch_ex/git.ex:37

[33mwarning: [0mEnum.filter_map/3 is deprecated, use Enum.filter/2 + Enum.map/2 or for comprehensions
  lib/inch_ex/docs/retriever.ex:96

[33mwarning: [0mAtom.to_char_list/1 is deprecated, use Atom.to_charlist/1
  lib/inch_ex/docs/retriever.ex:133

[33mwarning: [0mEnum.filter_map/3 is deprecated, use Enum.filter/2 + Enum.map/2 or for comprehensions
  lib/inch_ex/docs/retriever.ex:202

[33mwarning: [0mKernel.to_char_list/1 is deprecated, use Kernel.to_charlist/1
  lib/inch_ex/reporter/local.ex:33

[33mwarning: [0mString.to_char_list/1 is deprecated, use String.to_charlist/1
  lib/inch_ex/reporter/remote.ex:25

Generated inch_ex app
==> plug_crypto
Compiling 4 files (.ex)
Generated plug_crypto app
==> plug
Compiling 1 file (.erl)
Compiling 39 files (.ex)
Generated plug app
==> plug_cowboy
Compiling 5 files (.ex)
Generated plug_cowboy app
==> phoenix_html
Compiling 8 files (.ex)
Generated phoenix_html app
==> phoenix
Compiling 75 files (.ex)
Generated phoenix app
InchEx skipped (pull request on Travis CI).
travis_time:end:27f71a00:start=1565022261130587276,finish=1565022291062752376,duration=29932165100[0Ktravis_fold:end:after_script.2[0K
Done. Your build exited with 1.
